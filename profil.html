<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profil â€“ Vcare</title>
  <link rel="stylesheet" href="css/style.css" />
  <script defer src="js/humeur.js"></script>
</head>
<body class="page-profil">
  <header>
    <h1>ğŸ‘¤ Mon Profil</h1>
    <nav>
      <a href="index.html">Accueil</a>
      <a href="chatbot.html">Chatbot</a>
      <a href="bienetre.html">Bien-Ãªtre</a>
    </nav>
  </header>

  <main>
    <section class="profil-utilisateur">
      <h2>ğŸ’¬ Informations personnelles</h2>

      <label for="prenom">PrÃ©nom :</label>
      <input type="text" id="prenom" placeholder="Votre prÃ©nom" />
      <button onclick="sauverPrenom()">Enregistrer</button>

      <hr />

      <h3>ğŸ¨ Style visuel</h3>
      <select id="style-select" onchange="changerStyle(this.value)">
        <option value="style.css">Zen pastel (par dÃ©faut)</option>
        <option value="dark.css">Sombre</option>
        <option value="minimal.css">Minimal clair</option>
        <option value="cartoon.css">Cartoon doux</option>
      </select>

      <hr />

      <h3>ğŸ­ Humeur actuelle</h3>
      <label for="humeur-du-jour">Comment vous sentez-vous aujourdâ€™hui ?</label>
      <select id="humeur-du-jour">
        <option value="">Choisissez une humeur...</option>
        <option value="joyeux">ğŸ˜Š JoyeuxÂ·se</option>
        <option value="calme">ğŸ˜Œ Calme</option>
        <option value="triste">ğŸ˜¢ Triste</option>
        <option value="anxieux">ğŸ˜° AnxieuxÂ·se</option>
        <option value="fatigue">ğŸ˜´ FatiguÃ©Â·e</option>
        <option value="colere">ğŸ˜¡ En colÃ¨re</option>
        <option value="neutre">ğŸŒ€ Neutre (stable)</option>
        <option value="vide">ğŸ¤ Vide Ã©motionnel</option>
      </select>
      <p id="humeur-message" style="margin-top: 1rem; font-style: italic; color: #444;"></p>

      <hr />

      <h3>âš™ï¸ PrÃ©fÃ©rences</h3>
      <label>
        <input type="checkbox" id="autoHumeur" />
        Afficher la page â€œÃ‰tat du jourâ€ au lancement
      </label><br />
      <label>
        <input type="checkbox" id="notificationsBienveillantes" />
        Activer les notifications bienveillantes
      </label><br />
      <button onclick="sauverPreferences()">Sauvegarder les prÃ©fÃ©rences</button>

      <hr />

      <h3>ğŸ–ï¸ Mes Badges</h3>
      <ul id="liste-badges">
        <!-- Les badges gagnÃ©s apparaÃ®tront ici -->
      </ul>

      <hr />

      <h3>ğŸ“ Mes Souvenirs Positifs</h3>
      <ul id="liste-souvenirs">
        <!-- Les souvenirs enregistrÃ©s apparaÃ®tront ici -->
      </ul>

    </section>
  </main>

  <footer>
    <p>Â© Vcare â€“ Prenez soin de vous ğŸ’œ</p>
  </footer>

  <script>
    // Chargement initial
    window.addEventListener("load", () => {
      document.getElementById("prenom").value = localStorage.getItem("prenom") || "";
      document.getElementById("autoHumeur").checked = localStorage.getItem("autoHumeur") === "true";
      document.getElementById("notificationsBienveillantes").checked = localStorage.getItem("notifications") === "true";
      afficherBadges();
      afficherSouvenirs();
    });

    function sauverPrenom() {
      const prenom = document.getElementById("prenom").value;
      localStorage.setItem("prenom", prenom);
      alert("PrÃ©nom enregistrÃ© !");
    }

    function sauverPreferences() {
      const humeur = document.getElementById("autoHumeur").checked;
      const notif = document.getElementById("notificationsBienveillantes").checked;
      localStorage.setItem("autoHumeur", humeur);
      localStorage.setItem("notifications", notif);
      alert("PrÃ©fÃ©rences enregistrÃ©es !");
    }

    function changerStyle(nouveauStyle) {
      const link = document.querySelector('link[rel="stylesheet"]');
      link.setAttribute("href", "css/" + nouveauStyle);
    }

    function afficherBadges() {
      const badges = JSON.parse(localStorage.getItem("badgesGagnes")) || [];
      const ulBadges = document.getElementById("liste-badges");
      ulBadges.innerHTML = "";

      if (badges.length === 0) {
        ulBadges.innerHTML = "<li>Aucun badge encore gagnÃ©.</li>";
        return;
      }

      badges.forEach((badge) => {
        const li = document.createElement("li");
        li.textContent = "ğŸ–ï¸ " + badge;
        ulBadges.appendChild(li);
      });
    }

    function afficherSouvenirs() {
      const souvenirs = JSON.parse(localStorage.getItem("souvenirs")) || [];
      const ulSouvenirs = document.getElementById("liste-souvenirs");
      ulSouvenirs.innerHTML = "";

      if (souvenirs.length === 0) {
        ulSouvenirs.innerHTML = "<li>Aucun souvenir enregistrÃ©.</li>";
        return;
      }

      souvenirs.forEach((souvenir) => {
        const li = document.createElement("li");
        li.textContent = `ğŸ“ ${souvenir.texte} (${souvenir.date})`;
        ulSouvenirs.appendChild(li);
      });
    }
  </script>
</body>
</html>
